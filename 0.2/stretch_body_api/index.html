
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Hello Robot User Documentation">
      
      
        <meta name="author" content="Hello Robot Inc">
      
      
        <link rel="canonical" href="https://docs.hello-robot.com/0.2/stretch_body_api/">
      
      <link rel="icon" href="../images/hello_robot_favicon.png">
      <meta name="generator" content="mkdocs-1.3.0, mkdocs-material-8.3.9">
    
    
      
        <title>Stretch Body API Reference - Hello Robot Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../extra.css">
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="hello-robot-light" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#stretch-body-api-reference" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        <aside class="md-banner md-banner--warning">
          
        </aside>
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Hello Robot Documentation" class="md-header__button md-logo" aria-label="Hello Robot Documentation" data-md-component="logo">
      
  <img src="../images/hello_robot_logo_light.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Hello Robot Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Stretch Body API Reference
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="hello-robot-light" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="hello-robot-dark" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Hello Robot Documentation" class="md-nav__button md-logo" aria-label="Hello Robot Documentation" data-md-component="logo">
      
  <img src="../images/hello_robot_logo_light.png" alt="logo">

    </a>
    Hello Robot Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Resources" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Resources
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://forum.hello-robot.com/" class="md-nav__link">
        Stretch Forum
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/hello-robot" class="md-nav__link">
        Stretch GitHub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://youtube.com/c/HelloRobot" class="md-nav__link">
        Stretch Videos
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-robot-class" class="md-nav__link">
    The Robot Class
  </a>
  
    <nav class="md-nav" aria-label="The Robot Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-robot-class" class="md-nav__link">
    Using the Robot class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot" class="md-nav__link">
    Robot
  </a>
  
    <nav class="md-nav" aria-label="Robot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.startup" class="md-nav__link">
    startup()
  </a>
  
    <nav class="md-nav" aria-label="startup()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.startup--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.get_status" class="md-nav__link">
    get_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.pretty_print" class="md-nav__link">
    pretty_print()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.push_command" class="md-nav__link">
    push_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.follow_trajectory" class="md-nav__link">
    follow_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.stop_trajectory" class="md-nav__link">
    stop_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.is_calibrated" class="md-nav__link">
    is_calibrated()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.stow" class="md-nav__link">
    stow()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.robot.Robot.home" class="md-nav__link">
    home()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-device-classes" class="md-nav__link">
    The Device Classes
  </a>
  
    <nav class="md-nav" aria-label="The Device Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#using-the-arm-class" class="md-nav__link">
    Using the Arm class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm" class="md-nav__link">
    Arm
  </a>
  
    <nav class="md-nav" aria-label="Arm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.startup" class="md-nav__link">
    startup()
  </a>
  
    <nav class="md-nav" aria-label="startup()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.startup--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.startup--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.pull_status" class="md-nav__link">
    pull_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.push_command" class="md-nav__link">
    push_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.pretty_print" class="md-nav__link">
    pretty_print()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.get_soft_motion_limits" class="md-nav__link">
    get_soft_motion_limits()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.set_soft_motion_limit_min" class="md-nav__link">
    set_soft_motion_limit_min()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.set_soft_motion_limit_max" class="md-nav__link">
    set_soft_motion_limit_max()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.set_velocity" class="md-nav__link">
    set_velocity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.move_to" class="md-nav__link">
    move_to()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.move_by" class="md-nav__link">
    move_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.follow_trajectory" class="md-nav__link">
    follow_trajectory()
  </a>
  
    <nav class="md-nav" aria-label="follow_trajectory()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.follow_trajectory--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.update_trajectory" class="md-nav__link">
    update_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.stop_trajectory" class="md-nav__link">
    stop_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.motor_current_to_translate_force" class="md-nav__link">
    motor_current_to_translate_force()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.translate_force_to_motor_current" class="md-nav__link">
    translate_force_to_motor_current()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.motor_rad_to_translate" class="md-nav__link">
    motor_rad_to_translate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.translate_to_motor_rad" class="md-nav__link">
    translate_to_motor_rad()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.home" class="md-nav__link">
    home()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.arm.Arm.step_sentry" class="md-nav__link">
    step_sentry()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-lift-class" class="md-nav__link">
    Using the Lift class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift" class="md-nav__link">
    Lift
  </a>
  
    <nav class="md-nav" aria-label="Lift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.startup" class="md-nav__link">
    startup()
  </a>
  
    <nav class="md-nav" aria-label="startup()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.startup--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.startup--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.pull_status" class="md-nav__link">
    pull_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.push_command" class="md-nav__link">
    push_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.pretty_print" class="md-nav__link">
    pretty_print()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.get_soft_motion_limits" class="md-nav__link">
    get_soft_motion_limits()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.set_soft_motion_limit_min" class="md-nav__link">
    set_soft_motion_limit_min()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.set_soft_motion_limit_max" class="md-nav__link">
    set_soft_motion_limit_max()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.set_velocity" class="md-nav__link">
    set_velocity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.move_to" class="md-nav__link">
    move_to()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.move_by" class="md-nav__link">
    move_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.follow_trajectory" class="md-nav__link">
    follow_trajectory()
  </a>
  
    <nav class="md-nav" aria-label="follow_trajectory()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.follow_trajectory--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.update_trajectory" class="md-nav__link">
    update_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.stop_trajectory" class="md-nav__link">
    stop_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.motor_current_to_translate_force" class="md-nav__link">
    motor_current_to_translate_force()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.translate_force_to_motor_current" class="md-nav__link">
    translate_force_to_motor_current()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.motor_rad_to_translate_m" class="md-nav__link">
    motor_rad_to_translate_m()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.translate_to_motor_rad" class="md-nav__link">
    translate_to_motor_rad()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.home" class="md-nav__link">
    home()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.lift.Lift.step_sentry" class="md-nav__link">
    step_sentry()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-base-class" class="md-nav__link">
    Using the Base class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base" class="md-nav__link">
    Base
  </a>
  
    <nav class="md-nav" aria-label="Base">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.startup" class="md-nav__link">
    startup()
  </a>
  
    <nav class="md-nav" aria-label="startup()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.startup--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.startup--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.stop" class="md-nav__link">
    stop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.pretty_print" class="md-nav__link">
    pretty_print()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.enable_freewheel_mode" class="md-nav__link">
    enable_freewheel_mode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.enable_pos_incr_mode" class="md-nav__link">
    enable_pos_incr_mode()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.translate_by" class="md-nav__link">
    translate_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.rotate_by" class="md-nav__link">
    rotate_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.set_translate_velocity" class="md-nav__link">
    set_translate_velocity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.set_rotational_velocity" class="md-nav__link">
    set_rotational_velocity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.set_velocity" class="md-nav__link">
    set_velocity()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.follow_trajectory" class="md-nav__link">
    follow_trajectory()
  </a>
  
    <nav class="md-nav" aria-label="follow_trajectory()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.follow_trajectory--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.update_trajectory" class="md-nav__link">
    update_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.stop_trajectory" class="md-nav__link">
    stop_trajectory()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.step_sentry" class="md-nav__link">
    step_sentry()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.push_command" class="md-nav__link">
    push_command()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.pull_status" class="md-nav__link">
    pull_status()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.motor_current_to_translation_force" class="md-nav__link">
    motor_current_to_translation_force()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.motor_current_to_rotation_torque" class="md-nav__link">
    motor_current_to_rotation_torque()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.translation_force_to_motor_current" class="md-nav__link">
    translation_force_to_motor_current()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.rotation_torque_to_motor_current" class="md-nav__link">
    rotation_torque_to_motor_current()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.translate_to_motor_rad" class="md-nav__link">
    translate_to_motor_rad()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.motor_rad_to_translate" class="md-nav__link">
    motor_rad_to_translate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.rotate_to_motor_rad" class="md-nav__link">
    rotate_to_motor_rad()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.motor_rad_to_rotate" class="md-nav__link">
    motor_rad_to_rotate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.translation_to_rotation" class="md-nav__link">
    translation_to_rotation()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.base.Base.rotation_to_translation" class="md-nav__link">
    rotation_to_translation()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-head-class" class="md-nav__link">
    Using the Head class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head" class="md-nav__link">
    Head
  </a>
  
    <nav class="md-nav" aria-label="Head">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.startup" class="md-nav__link">
    startup()
  </a>
  
    <nav class="md-nav" aria-label="startup()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.startup--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.startup--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.get_joint" class="md-nav__link">
    get_joint()
  </a>
  
    <nav class="md-nav" aria-label="get_joint()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.get_joint--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.get_joint--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.move_to" class="md-nav__link">
    move_to()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.move_by" class="md-nav__link">
    move_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.home" class="md-nav__link">
    home()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.head.Head.pose" class="md-nav__link">
    pose()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-endofarm-class" class="md-nav__link">
    Using the EndOfArm class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm" class="md-nav__link">
    EndOfArm
  </a>
  
    <nav class="md-nav" aria-label="EndOfArm">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.startup" class="md-nav__link">
    startup()
  </a>
  
    <nav class="md-nav" aria-label="startup()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.startup--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.startup--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.get_joint" class="md-nav__link">
    get_joint()
  </a>
  
    <nav class="md-nav" aria-label="get_joint()">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.get_joint--parameters" class="md-nav__link">
    Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.get_joint--returns" class="md-nav__link">
    Returns
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.move_to" class="md-nav__link">
    move_to()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.move_by" class="md-nav__link">
    move_by()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.pose" class="md-nav__link">
    pose()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.stow" class="md-nav__link">
    stow()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.home" class="md-nav__link">
    home()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.end_of_arm.EndOfArm.is_tool_present" class="md-nav__link">
    is_tool_present()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-wacc-class" class="md-nav__link">
    Using the Wacc class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.wacc.Wacc" class="md-nav__link">
    Wacc
  </a>
  
    <nav class="md-nav" aria-label="Wacc">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.wacc.Wacc.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.wacc.Wacc.startup" class="md-nav__link">
    startup()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-pimu-class" class="md-nav__link">
    Using the Pimu class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.pimu.Pimu" class="md-nav__link">
    Pimu
  </a>
  
    <nav class="md-nav" aria-label="Pimu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stretch_body.pimu.Pimu.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stretch_body.pimu.Pimu.startup" class="md-nav__link">
    startup()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

  



<h1 id="stretch-body-api-reference">Stretch Body API Reference</h1>
<p>Stretch Body is the Python interface to working with the Stretch RE1. This page serves as a reference of the interfaces defined in the <code>stretch_body</code> library. See the <a href="../stretch_body_guide/">Stretch Body Guide</a> for a tutorial to working with this library.</p>
<h2 id="the-robot-class">The Robot Class</h2>
<h3 id="using-the-robot-class">Using the Robot class</h3>
<p>The most common interface to Stretch is the <a href="#stretch_body.robot.Robot">Robot</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.robot</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">robot</span><span class="o">.</span><span class="n">Robot</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">r</span><span class="o">.</span><span class="n">startup</span><span class="p">():</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start robot!</span>

<span class="c1"># home the joints to find zero, if necessary</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">r</span><span class="o">.</span><span class="n">is_calibrated</span><span class="p">():</span>
    <span class="n">r</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>

<span class="c1"># interact with the robot here</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.robot.Robot.startup"><code>startup()</code></a> and <a href="#stretch_body.robot.Robot.home"><code>home()</code></a> methods starts communication with and homes each of the robot's devices, respectively. Through the <a href="#stretch_body.robot.Robot">Robot</a> class, users can interact with all other devices on the robot. For example, continuing the example above:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># moving joints on the robot</span>
<span class="n">r</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">lift</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">end_of_arm</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>

<span class="c1"># other devices on the robot</span>
<span class="n">r</span><span class="o">.</span><span class="n">wacc</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>
<span class="n">r</span><span class="o">.</span><span class="n">pimu</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>

<span class="n">r</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>Each of these devices are defined in other modules within <code>stretch_body</code>. In the <a href="#the-device-classes">following section</a>, we'll look at the API of these classes. The <a href="#stretch_body.robot.Robot.stop"><code>stop()</code></a> method shuts down communication with the robot's devices. All of <a href="#stretch_body.robot.Robot">Robot's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.robot.Robot" class="doc doc-heading">
        <code>
stretch_body.robot.Robot            (<span title="stretch_body.device.Device">Device</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Robot</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>To be called once after class instantiation.
Prepares devices for communications and motion</p>
<h6 id="stretch_body.robot.Robot.startup--returns">Returns</h6>
<p>bool
    true if startup of robot succeeded</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>To be called once before exiting a program
Cleanly stops down motion and communication</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.get_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Thread safe and atomic read of current Robot status data
Returns as a dict.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.pretty_print" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pretty_print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.push_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">push_command</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Cause all queued up RPC commands to be sent down to Devices</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.follow_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">follow_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.stop_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.is_calibrated" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_calibrated</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Returns true if homing-calibration has been run all joints that require it</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.stow" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stow</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Cause the robot to move to its stow position
Blocking.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.robot.Robot.home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Cause the robot to home its joints by moving to hardstops
Blocking.</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<h2 id="the-device-classes">The Device Classes</h2>
<p>The <code>stretch_body</code> library is modular in design. Each subcomponent of Stretch is defined in its own class and <a href="#the-robot-class">the Robot class</a> provides an interface that ties all of these classes together. This modularity allows users to plug in new/modified subcomponents into the <a href="#stretch_body.robot.Robot">Robot</a> interface by extending a device class.</p>
<p>It is possible to interface with a single subcomponent of Stretch by initializing its device class directly. In this section, we'll look at the API of seven device classes: the <a href="#stretch_body.arm.Arm">arm</a>, <a href="#stretch_body.lift.Lift">lift</a>, <a href="#stretch_body.base.Base">base</a>, <a href="#stretch_body.head.Head">head</a>, <a href="#stretch_body.end_of_arm.EndOfArm">end of arm</a>, <a href="#stretch_body.wacc.Wacc">wacc</a>, and <a href="#stretch_body.pimu.Pimu">pimu</a> subcomponents of Stretch.</p>
<h3 id="using-the-arm-class">Using the Arm class</h3>
<p><img alt="Top down Stretch arm blueprint" src="../images/arm_top.png#only-light" />
<img alt="Top down Stretch arm blueprint" src="../images/arm_top.png#only-dark" /></p>
<p>The interface to Stretch's telescoping arm is the <a href="#stretch_body.arm.Arm">Arm</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.arm</span>

<span class="n">a</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">arm</span><span class="o">.</span><span class="n">Arm</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">disable_sync_mode</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">a</span><span class="o">.</span><span class="n">startup</span><span class="p">():</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start arm!</span>

<span class="n">a</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>

<span class="c1"># interact with the arm here</span>
</code></pre></div></td></tr></table></div>
<p>Since both <a href="#stretch_body.arm.Arm">Arm</a> and <a href="#stretch_body.robot.Robot">Robot</a> subclass <a href="#stretch_body.device.Device">Device</a>, the same <a href="#stretch_body.arm.Arm.startup"><code>startup()</code></a> and <a href="#stretch_body.arm.Arm.stop"><code>stop()</code></a> methods are available here, as well as other <a href="#stretch_body.device.Device">Device</a> methods such as <a href="#stretch_body.arm.Arm.home"><code>home()</code></a>. Using the <a href="#stretch_body.arm.Arm">Arm</a> class, we can read the arm's current state and send commands to the joint. For example, continuing the example above:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">starting_position</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>

<span class="c1"># move out by 10cm</span>
<span class="n">a</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">starting_position</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>

<span class="c1"># move back to starting position quickly</span>
<span class="n">a</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">starting_position</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>

<span class="n">a</span><span class="o">.</span><span class="n">move_by</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span> <span class="c1"># move out by 10cm</span>
<span class="n">a</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.arm.Arm.move_to"><code>move_to()</code></a> and <a href="#stretch_body.arm.Arm.move_by"><code>move_by()</code></a> methods queue absolute and relative commands to the arm respectively, while the nonblocking <a href="#stretch_body.arm.Arm.push_command"><code>push_command()</code></a> method pushes the queued command to the hardware for execution. Arm's attribute <code>motor</code>, an instance of the <a href="#stretch_body.stepper.Stepper">Stepper</a> class, has <a href="#stretch_body.stepper.Stepper.wait_until_at_setpoint"><code>wait_until_at_setpoint()</code></a> which blocks program execution until the joint reaches the commanded goal. With <a href="https://github.com/hello-robot/stretch_firmware/blob/master/tutorials/docs/updating_firmware.md">P1 or greater firmware</a> installed, it is also possible to queue a waypoint trajectory for the arm to follow:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">starting_position</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>

<span class="c1"># queue a trajectory consisting of four waypoints</span>
<span class="n">a</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="n">starting_position</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="mf">0.15</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>

<span class="c1"># trigger trajectory execution</span>
<span class="n">a</span><span class="o">.</span><span class="n">follow_trajectory</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>Arm's attribute <code>trajectory</code>, an instance of the <a href="#stretch_body.trajectories.PrismaticTrajectory">PrismaticTrajectory</a> class, has <a href="#stretch_body.trajectories.PrismaticTrajectory.add"><code>add()</code></a> which adds a single waypoint in a linear sliding trajectory. For a well formed <code>trajectory</code> (see <a href="#stretch_body.trajectories.Spline.is_valid"><code>is_valid()</code></a>), the <a href="#stretch_body.arm.Arm.follow_trajectory"><code>follow_trajectory()</code></a> method kicks off trajectory following for the telescoping arm. It is also possible to dynamically restrict the arm joint's range:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">range_upper_limit</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c1"># meters</span>

<span class="c1"># set soft limits on arm&#39;s range</span>
<span class="n">a</span><span class="o">.</span><span class="n">set_soft_motion_limit_min</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">set_soft_motion_limit_max</span><span class="p">(</span><span class="n">range_upper_limit</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>

<span class="c1"># command the arm outside the valid range</span>
<span class="n">a</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="mf">0.4</span><span class="p">)</span>
<span class="n">a</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">a</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">])</span> <span class="c1"># we should expect to see ~0.3</span>

<span class="n">a</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.arm.Arm.set_soft_motion_limit_min"><code>set_soft_motion_limit_min/max()</code></a> methods form the basis of an experimental <a href="https://github.com/hello-robot/stretch_body/blob/master/body/stretch_body/robot_collision.py#L47">self-collision avoidance</a> system built into Stretch Body. All of <a href="#stretch_body.arm.Arm">Arm's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.arm.Arm" class="doc doc-heading">
        <code>
stretch_body.arm.Arm            (<span title="stretch_body.device.Device">Device</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Arm</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts machinery required to interface with this device</p>
<h6 id="stretch_body.arm.Arm.startup--parameters">Parameters</h6>
<p>threaded : bool
    whether a thread manages hardware polling/pushing in the background</p>
<h6 id="stretch_body.arm.Arm.startup--returns">Returns</h6>
<p>bool
    whether the startup procedure succeeded</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Shuts down machinery started in <code>startup()</code></p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.pull_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pull_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.push_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">push_command</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.pretty_print" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pretty_print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.get_soft_motion_limits" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_soft_motion_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Return the currently applied soft motion limits: [min, max]</p>
<p>The soft motion limit restricts joint motion to be &lt;= its physical limits.</p>
<p>There are three types of limits:
Hard: The physical limits
Collision: Limits set by RobotCollision to avoid collisions
User: Limits set by the user software</p>
<p>The joint is limited to the most restrictive range of the Hard / Collision/ User values.
Specifying a value of None for a limit indicates that no constraint exists for that limit type.
This allows a User limits and Collision limits to coexist.
For example, a user can temporarily restrict the range of motion beyond the current collision limits.
Then, by commanding User limits of None, the joint limits will revert back to the collision settings.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.set_soft_motion_limit_min" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_soft_motion_limit_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">limit_type</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x: value to set a joints limit to
limit_type: 'user' or 'collision'</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.set_soft_motion_limit_max" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_soft_motion_limit_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">limit_type</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x: value to set a joints limit to
limit_type: 'user' or 'collision'</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.set_velocity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_m</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.move_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x_m: commanded absolute position (meters). x_m=0 is retracted. x_m=~0.5 is extended
v_m: velocity for trapezoidal motion profile (m/s)
a_m: acceleration for trapezoidal motion profile (m/s^2)
stiffness: stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_pos_N: force threshold to stop motion (~Newtons, extension direction)
contact_thresh_neg_N: force threshold to stop motion (~Newtons, retraction direction)
req_calibration: Disallow motion prior to homing</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.move_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x_m: commanded incremental motion (meters).
v_m: velocity for trapezoidal motion profile (m/s)
a_m: acceleration for trapezoidal motion profile (m/s^2)
stiffness: stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_pos_N: force threshold to stop motion (~Newtons, extension direction)
contact_thresh_neg_N: force threshold to stop motion (~Newtons, retraction direction)
req_calibration: Disallow motion prior to homing</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.follow_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">follow_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">move_to_start_point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts executing a waypoint trajectory</p>
<p><code>self.trajectory</code> must be populated with a valid trajectory before calling
this method.</p>
<h6 id="stretch_body.arm.Arm.follow_trajectory--parameters">Parameters</h6>
<p>v_m : float
    velocity limit for trajectory in meters per second
a_m : float
    acceleration limit for trajectory in meters per second squared
stiffness : float
    stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_pos_N : float
    force threshold to stop motion (~Newtons, extension direction)
contact_thresh_neg_N : float
    force threshold to stop motion (~Newtons, retraction direction)
req_calibration : bool
    whether to allow motion prior to homing
move_to_start_point : bool
    whether to move to the trajectory's start to avoid a jump, this
    time to move doesn't count against the trajectory's timeline</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.update_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Updates hardware with the next segment of <code>self.trajectory</code></p>
<p>This method must be called frequently to enable complete trajectory execution
and preemption of future segments. If used with <code>stretch_body.robot.Robot</code> or
with <code>self.startup(threaded=True)</code>, a background thread is launched for this.
Otherwise, the user must handle calling this method.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.stop_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Stop waypoint trajectory immediately and resets hardware</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.motor_current_to_translate_force" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_current_to_translate_force</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.translate_force_to_motor_current" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translate_force_to_motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.motor_rad_to_translate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_rad_to_translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ang</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.translate_to_motor_rad" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translate_to_motor_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arm_m</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">single_stop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">measuring</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Home to hardstops</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.arm.Arm.step_sentry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_sentry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="using-the-lift-class">Using the Lift class</h3>
<p><img alt="Stretch lift blueprint" src="../images/lift_detail_rs.png#only-light" />
<img alt="Stretch lift blueprint" src="../images/lift_detail_rs.png#only-dark" /></p>
<p>The interface to Stretch's lift is the <a href="#stretch_body.lift.Lift">Lift</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.lift</span>

<span class="n">l</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">lift</span><span class="o">.</span><span class="n">Lift</span><span class="p">()</span>
<span class="n">l</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">disable_sync_mode</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">l</span><span class="o">.</span><span class="n">startup</span><span class="p">():</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start lift!</span>

<span class="n">l</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>

<span class="c1"># interact with the lift here</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.lift.Lift.startup"><code>startup()</code></a> and <a href="#stretch_body.lift.Lift.home"><code>home()</code></a> methods are extended from the <a href="#stretch_body.device.Device">Device</a> class. Reading the lift's current state and sending commands to the joint occurs similarly to the <a href="#stretch_body.arm.Arm">Arm</a>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">starting_position</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>

<span class="c1"># move up by 10cm</span>
<span class="n">l</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="n">starting_position</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">l</span><span class="o">.</span><span class="n">motor</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.lift.Lift">Lift's</a> attribute <code>status</code> is a dictionary of the joint's current status. This state information is updated in the background in real time by default (disable by initializing as <a href="#stretch_body.lift.Lift.startup"><code>startup(threading=False)</code></a>). Use the <a href="#stretch_body.lift.Lift.pretty_print"><code>pretty_print()</code></a> method to print out this state info in a human interpretable format. Setting up waypoint trajectories for the lift is also similar to the <a href="#stretch_body.arm.Arm">Arm</a>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">starting_position</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>

<span class="c1"># queue a trajectory consisting of three waypoints</span>
<span class="n">l</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="n">starting_position</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>               <span class="n">v_m</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">x_m</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>               <span class="n">v_m</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># trigger trajectory execution</span>
<span class="n">l</span><span class="o">.</span><span class="n">follow_trajectory</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.lift.Lift">Lift's</a> attribute <code>trajectory</code> is also an instance of the <a href="#stretch_body.trajectories.PrismaticTrajectory">PrismaticTrajectory</a> class, and by providing the instantaneous velocity argument <code>v_m</code> to the <a href="#stretch_body.trajectories.PrismaticTrajectory.add"><code>add()</code></a> method, a cubic spline has been loaded into the joint's <code>trajectory</code>. The call to <a href="#stretch_body.lift.Lift.follow_trajectory"><code>follow_trajectory()</code></a> begins hardware tracking of the spline. Finally, setting soft motion limits for the lift's range happens using:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># cut out 0.2m from the top and bottom of the lift&#39;s range</span>
<span class="n">l</span><span class="o">.</span><span class="n">set_soft_motion_limit_min</span><span class="p">(</span><span class="mf">0.2</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">set_soft_motion_limit_max</span><span class="p">(</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">l</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>

<span class="n">l</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.lift.Lift.set_soft_motion_limit_min"><code>set_soft_motion_limit_min/max()</code></a> methods perform clipping of the joint's range at the firmware level (can persist across reboots). All of <a href="#stretch_body.lift.Lift">Lift's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.lift.Lift" class="doc doc-heading">
        <code>
stretch_body.lift.Lift            (<span title="stretch_body.device.Device">Device</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Lift</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts machinery required to interface with this device</p>
<h6 id="stretch_body.lift.Lift.startup--parameters">Parameters</h6>
<p>threaded : bool
    whether a thread manages hardware polling/pushing in the background</p>
<h6 id="stretch_body.lift.Lift.startup--returns">Returns</h6>
<p>bool
    whether the startup procedure succeeded</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Shuts down machinery started in <code>startup()</code></p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.pull_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pull_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.push_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">push_command</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.pretty_print" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pretty_print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.get_soft_motion_limits" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_soft_motion_limits</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Return the currently applied soft motion limits: [min, max]</p>
<p>The soft motion limit restricts joint motion to be &lt;= its physical limits.</p>
<p>There are three types of limits:
Hard: The physical limits
Collision: Limits set by RobotCollision to avoid collisions
User: Limits set by the user software</p>
<p>The joint is limited to the most restrictive range of the Hard / Collision/ User values.
Specifying a value of None for a limit indicates that no constraint exists for that limit type.
This allows a User limits and Collision limits to coexist.
For example, a user can temporarily restrict the range of motion beyond the current collision limits.
Then, by commanding User limits of None, the joint limits will revert back to the collision settings.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.set_soft_motion_limit_min" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_soft_motion_limit_min</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">limit_type</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x: value to set a joints limit to
limit_type: 'user' or 'collision'</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.set_soft_motion_limit_max" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_soft_motion_limit_max</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">limit_type</span><span class="o">=</span><span class="s1">&#39;user&#39;</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x: value to set a joints limit to
limit_type: 'user' or 'collision'</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.set_velocity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_m</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.move_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x_m: commanded absolute position (meters). x_m=0 is down. x_m=~1.1 is up
v_m: velocity for trapezoidal motion profile (m/s)
a_m: acceleration for trapezoidal motion profile (m/s^2)
stiffness: stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_pos_N: force threshold to stop motion (~Newtons, up direction)
contact_thresh_neg_N: force threshold to stop motion (~Newtons, down direction)
req_calibration: Disallow motion prior to homing</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.move_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>x_m: commanded incremental motion (meters).
v_m: velocity for trapezoidal motion profile (m/s)
a_m: acceleration for trapezoidal motion profile (m/s^2)
stiffness: stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_pos_N: force threshold to stop motion (~Newtons, up direction)
contact_thresh_neg_N: force threshold to stop motion (~Newtons, down direction)
req_calibration: Disallow motion prior to homing</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.follow_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">follow_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_pos_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_neg_N</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">req_calibration</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">move_to_start_point</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts executing a waypoint trajectory</p>
<p><code>self.trajectory</code> must be populated with a valid trajectory before calling
this method.</p>
<h6 id="stretch_body.lift.Lift.follow_trajectory--parameters">Parameters</h6>
<p>v_m : float
    velocity limit for trajectory in meters per second
a_m : float
    acceleration limit for trajectory in meters per second squared
stiffness : float
    stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_pos_N : float
    force threshold to stop motion (~Newtons, up direction)
contact_thresh_neg_N : float
    force threshold to stop motion (~Newtons, down direction)
req_calibration : bool
    whether to allow motion prior to homing
move_to_start_point : bool
    whether to move to the trajectory's start to avoid a jump, this
    time to move doesn't count against the trajectory's timeline</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.update_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Updates hardware with the next segment of <code>self.trajectory</code></p>
<p>This method must be called frequently to enable complete trajectory execution
and preemption of future segments. If used with <code>stretch_body.robot.Robot</code> or
with <code>self.startup(threaded=True)</code>, a background thread is launched for this.
Otherwise, the user must handle calling this method.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.stop_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Stop waypoint trajectory immediately and resets hardware</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.motor_current_to_translate_force" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_current_to_translate_force</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.translate_force_to_motor_current" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translate_force_to_motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.motor_rad_to_translate_m" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_rad_to_translate_m</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ang</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.translate_to_motor_rad" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translate_to_motor_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lift_m</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">measuring</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.lift.Lift.step_sentry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_sentry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="using-the-base-class">Using the Base class</h3>
<p><img alt="Stretch mobile base diagram" src="../images/hw_image_1.png#only-light" />
<img alt="Stretch mobile base diagram" src="../images/hw_image_1.png#only-dark" /></p>
<table>
<thead>
<tr>
<th></th>
<th>Item</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Drive wheels</td>
<td>4 inch diameter, urethane rubber shore 60A</td>
</tr>
<tr>
<td>B</td>
<td>Cliff sensors</td>
<td>Sharp GP2Y0A51SK0F, Analog, range 2-15 cm</td>
</tr>
<tr>
<td>C</td>
<td>Mecanum wheel</td>
<td>Diameter 50mm</td>
</tr>
</tbody>
</table>
<p>The interface to Stretch's mobile base is the <a href="#stretch_body.base.Base">Base</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.base</span>

<span class="n">b</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">Base</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">left_wheel</span><span class="o">.</span><span class="n">disable_sync_mode</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">right_wheel</span><span class="o">.</span><span class="n">disable_sync_mode</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">b</span><span class="o">.</span><span class="n">startup</span><span class="p">():</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start base!</span>

<span class="c1"># interact with the base here</span>
</code></pre></div></td></tr></table></div>
<p>Stretch's mobile base is a differential drive configuration. The left and right wheels are accessible through <a href="#stretch_body.base.Base">Base's</a> <code>left_wheel</code> and  <code>right_wheel</code> attributes, both of which are instances of the <a href="#stretch_body.stepper.Stepper">Stepper</a> class. The <a href="#stretch_body.base.Base.startup"><code>startup()</code></a> method is extended from the <a href="#stretch_body.device.Device">Device</a> class. Since the mobile base is unconstrained, there is no homing method. We can read the base's current state and send commands using:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">b</span><span class="o">.</span><span class="n">pretty_print</span><span class="p">()</span>

<span class="c1"># translate forward by 10cm</span>
<span class="n">b</span><span class="o">.</span><span class="n">translate_by</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">left_wheel</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>

<span class="c1"># rotate counter-clockwise by 90 degrees</span>
<span class="n">b</span><span class="o">.</span><span class="n">rotate_by</span><span class="p">(</span><span class="mf">1.57</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">left_wheel</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.base.Base.pretty_print"><code>pretty_print()</code></a> method prints out mobile base state info in a human interpretable format. The <a href="#stretch_body.base.Base.translate_by"><code>translate_by()</code></a> and <a href="#stretch_body.base.Base.rotate_by"><code>rotate_by()</code></a> methods send relative commands similar to the way <a href="#stretch_body.lift.Lift.move_by"><code>move_by()</code></a> behaves for the single degree of freedom joints. The mobile base also supports velocity control:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># command the base to translate forward at 5cm / second</span>
<span class="n">b</span><span class="o">.</span><span class="n">set_translate_velocity</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># command the base to rotate counter-clockwise at 0.1rad / second</span>
<span class="n">b</span><span class="o">.</span><span class="n">set_rotational_velocity</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># command the base with translational and rotational velocities</span>
<span class="n">b</span><span class="o">.</span><span class="n">set_velocity</span><span class="p">(</span><span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># stop base motion</span>
<span class="n">b</span><span class="o">.</span><span class="n">enable_freewheel_mode</span><span class="p">()</span>
<span class="n">b</span><span class="o">.</span><span class="n">push_command</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.base.Base.set_translate_velocity"><code>set_translate_velocity()</code></a>/<a href="#stretch_body.base.Base.set_rotational_velocity"><code>set_rotational_velocity()</code></a> give velocity control over the translational/rotational components of the mobile base independently. The <a href="#stretch_body.base.Base.set_velocity"><code>set_velocity()</code></a> method gives control over both of these components simultaneously. To halt motion, you can command zero velocities or command the base into freewheel mode using <a href="#stretch_body.base.Base.enable_freewheel_mode"><code>enable_freewheel_mode()</code></a>. The mobile base also supports waypoint trajectory following, but the waypoints are part of the SE2 group (a.k.a. each of the base's desired waypoints is defined as a (x, y) point and a theta orientation):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># reset odometry calculation</span>
<span class="n">b</span><span class="o">.</span><span class="n">first_step</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">b</span><span class="o">.</span><span class="n">pull_status</span><span class="p">()</span>

<span class="c1"># queue a trajectory consisting of three waypoints</span>
<span class="n">b</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">b</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c1"># trigger trajectory execution</span>
<span class="n">b</span><span class="o">.</span><span class="n">follow_trajectory</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">b</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">],</span> <span class="n">b</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;theta&#39;</span><span class="p">])</span> <span class="c1"># we should expect to see around (0.0, 0.0, 0.0 or 6.28)</span>

<span class="n">b</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a href="#stretch_body.base.Base">Base's</a> waypoint trajectory following has no notion of obstacles in the environment. It will blindly follow the commanded waypoints. For obstacle avoidance, perception and a path planner should be employed.</p>
</div>
<p><a href="#stretch_body.base.Base">Base's</a> attribute <code>trajectory</code> is an instance of the <a href="#stretch_body.trajectories.DiffDriveTrajectory">DiffDriveTrajectory</a> class. The call to <a href="#stretch_body.base.Base.follow_trajectory"><code>follow_trajectory()</code></a> begins hardware tracking of the spline. All of <a href="#stretch_body.base.Base">Base's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.base.Base" class="doc doc-heading">
        <code>
stretch_body.base.Base            (<span title="stretch_body.device.Device">Device</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Mobile Base</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts machinery required to interface with this device</p>
<h6 id="stretch_body.base.Base.startup--parameters">Parameters</h6>
<p>threaded : bool
    whether a thread manages hardware polling/pushing in the background</p>
<h6 id="stretch_body.base.Base.startup--returns">Returns</h6>
<p>bool
    whether the startup procedure succeeded</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.stop" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Shuts down machinery started in <code>startup()</code></p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.pretty_print" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pretty_print</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.enable_freewheel_mode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_freewheel_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Force motors into freewheel</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.enable_pos_incr_mode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">enable_pos_incr_mode</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Force motors into incremental position mode</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.translate_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translate_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">,</span> <span class="n">v_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_N</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Incremental translation of the base
x_m: desired motion (m)
v_m: velocity for trapezoidal motion profile (m/s)
a_m: acceleration for trapezoidal motion profile (m/s^2)
stiffness: stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_N: force threshold to stop motion (TODO: Not yet implemented)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.rotate_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rotate_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_r</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_N</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Incremental rotation of the base
x_r: desired motion (radians)
v_r: velocity for trapezoidal motion profile (rad/s)
a_r: acceleration for trapezoidal motion profile (rad/s^2)
stiffness: stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_N: force threshold to stop motion (Not yet implemented)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.set_translate_velocity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_translate_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_m</span><span class="p">,</span> <span class="n">a_m</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Command the bases translational velocity.
Use care to prevent collisions / avoid runaways
v_m: desired velocity (m/s)
a_m: acceleration of motion profile (m/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.set_rotational_velocity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_rotational_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_r</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Command the bases rotational velocity.
Use care to prevent collisions / avoid runaways
v_r: desired rotational velocity (rad/s)
a_r: acceleration of motion profile (rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.set_velocity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_m</span><span class="p">,</span> <span class="n">w_r</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Command the bases translational and rotational
velocities simultaneously.
Use care to prevent collisions / avoid runaways
v_m: desired velocity (m/s)
w_r: desired rotational velocity (rad/s)
a:   acceleration of motion profile (m/s^2 and rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.follow_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">follow_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stiffness</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">contact_thresh_N</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts executing a waypoint trajectory</p>
<p><code>self.trajectory</code> must be populated with a valid trajectory before calling
this method.</p>
<h6 id="stretch_body.base.Base.follow_trajectory--parameters">Parameters</h6>
<p>v_r : float
    velocity limit for trajectory in motor space in meters per second
a_r : float
    acceleration limit for trajectory in motor space in meters per second squared
stiffness : float
    stiffness of motion. Range 0.0 (min) to 1.0 (max)
contact_thresh_N : float
    force threshold to stop motion (~Newtons)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.update_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">update_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Updates hardware with the next segment of <code>self.trajectory</code></p>
<p>This method must be called frequently to enable complete trajectory execution
and preemption of future segments. If used with <code>stretch_body.robot.Robot</code> or
with <code>self.startup(threaded=True)</code>, a background thread is launched for this.
Otherwise, the user must handle calling this method.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.stop_trajectory" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stop_trajectory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Stop waypoint trajectory immediately and resets hardware</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.step_sentry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">step_sentry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Only allow fast mobile base motion if the lift is low,
the arm is retracted, and the wrist is stowed. This is
intended to keep the center of mass low for increased
stability and avoid catching the arm or tool on
something.</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.push_command" class="doc doc-heading">
<code class="highlight language-python"><span class="n">push_command</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.pull_status" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pull_status</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Computes base odometery based on stepper positions / velocities</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.motor_current_to_translation_force" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_current_to_translation_force</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">il</span><span class="p">,</span> <span class="n">ir</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.motor_current_to_rotation_torque" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_current_to_rotation_torque</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">il</span><span class="p">,</span> <span class="n">ir</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.translation_force_to_motor_current" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translation_force_to_motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f_N</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.rotation_torque_to_motor_current" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rotation_torque_to_motor_current</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tq_Nm</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.translate_to_motor_rad" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translate_to_motor_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.motor_rad_to_translate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_rad_to_translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_r</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.rotate_to_motor_rad" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rotate_to_motor_rad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_r</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.motor_rad_to_rotate" class="doc doc-heading">
<code class="highlight language-python"><span class="n">motor_rad_to_rotate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_r</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.translation_to_rotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">translation_to_rotation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_m</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.base.Base.rotation_to_translation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">rotation_to_translation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x_r</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="using-the-head-class">Using the Head class</h3>
<p><img alt="Stretch head blueprint" src="../images/tilt_detail_rs.png#only-light" />
<img alt="Stretch head blueprint" src="../images/tilt_detail_rs.png#only-dark" /></p>
<p>The interface to Stretch's head is the <a href="#stretch_body.head.Head">Head</a> class. Stretch's head contains a Intel Realsense D435i depth camera, so the pan/tilt joints in the head allows Stretch to swivel and capture depth imagery of its surrounding. The head is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.head</span>

<span class="n">h</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">head</span><span class="o">.</span><span class="n">Head</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">h</span><span class="o">.</span><span class="n">startup</span><span class="p">():</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start head!</span>

<span class="n">h</span><span class="o">.</span><span class="n">home</span><span class="p">()</span>

<span class="c1"># interact with the head here</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.head.Head">Head</a> is a subclass of <a href="#stretch_body.dynamixel_X_chain.DynamixelXChain">DynamixelXChain</a>, which in turn subclasses the <a href="#stretch_body.device.Device">Device</a> class. Therefore, some of <a href="#stretch_body.head.Head">Head's</a> methods, such as <a href="#stretch_body.head.Head.startup"><code>startup()</code></a> and <a href="#stretch_body.head.Head.home"><code>home()</code></a> methods are extended from the <a href="#stretch_body.device.Device">Device</a> class, while other come from the <a href="#stretch_body.dynamixel_X_chain.DynamixelXChain">DynamixelXChain</a> class. Reading the head's current state and sending commands to its revolute joints (head pan and tilt) happens using:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">starting_position</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">status</span><span class="p">[</span><span class="s1">&#39;head_pan&#39;</span><span class="p">][</span><span class="s1">&#39;pos&#39;</span><span class="p">]</span>

<span class="c1"># look right by 90 degrees</span>
<span class="n">h</span><span class="o">.</span><span class="n">move_to</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">,</span> <span class="n">starting_position</span> <span class="o">+</span> <span class="mf">1.57</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>

<span class="c1"># tilt up by 30 degrees</span>
<span class="n">h</span><span class="o">.</span><span class="n">move_by</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.57</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">wait_until_at_setpoint</span><span class="p">()</span>

<span class="c1"># look down towards the wheels</span>
<span class="n">h</span><span class="o">.</span><span class="n">pose</span><span class="p">(</span><span class="s1">&#39;wheels&#39;</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="c1"># look ahead</span>
<span class="n">h</span><span class="o">.</span><span class="n">pose</span><span class="p">(</span><span class="s1">&#39;ahead&#39;</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.head.Head">Head's</a> attribute <code>status</code> is a dictionary of dictionaries, where each subdictionary is the status of one of the head's joints. This state information is updated in the background in real time by default (disable by initializing as <a href="#stretch_body.head.Head.startup"><code>startup(threading=False)</code></a>). Use the <a href="#stretch_body.head.Head.pretty_print"><code>pretty_print()</code></a> method to print out this state info in a human interpretable format. Commanding the head's revolute joints is done through the <a href="#stretch_body.head.Head.move_to"><code>move_to()</code></a> and <a href="#stretch_body.head.Head.move_by"><code>move_by()</code></a> methods. Notice that unlike the previous joints, no push command call is required here. These joints are Dynamixel servos, which behave differently than the Hello Robot steppers. Their commands are not queued; they're executed as soon as they're received. <a href="#stretch_body.head.Head">Head's</a> two joints, the 'head_pan' and 'head_tilt', are instances of the <a href="#stretch_body.dynamixel_hello_XL430.DynamixelHelloXL430">DynamixelHelloXL430</a> class, and are retreiveable using the <a href="#stretch_body.head.Head.get_joint"><code>get_joint()</code></a> method. They have the <a href="#stretch_body.dynamixel_hello_XL430.DynamixelHelloXL430.wait_until_at_setpoint"><code>wait_until_at_setpoint()</code></a> method, which blocks program execution until the joint reaches the commanded goal. The <a href="#stretch_body.head.Head.pose"><code>pose()</code></a> method makes it easy to command the head to common head poses (e.g. looking 'ahead', at the end of arm 'tool', obstacles in front of the 'wheels', or 'up'). The head supports waypoint trajectories as well:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># queue a trajectory consisting of three waypoints</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_r</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x_r</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">x_r</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_r</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">x_r</span><span class="o">=-</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">trajectory</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">t_s</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">x_r</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

<span class="c1"># trigger trajectory execution</span>
<span class="n">h</span><span class="o">.</span><span class="n">follow_trajectory</span><span class="p">()</span>
<span class="kn">import</span> <span class="nn">time</span><span class="p">;</span> <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The head pan/tilt <a href="#stretch_body.dynamixel_hello_XL430.DynamixelHelloXL430">DynamixelHelloXL430</a> instances have an attribute <code>trajectory</code>, which is an instance of the <a href="#stretch_body.trajectories.RevoluteTrajectory">RevoluteTrajectory</a> class. The call to <a href="#stretch_body.dynamixel_X_chain.DynamixelXChain.follow_trajectory"><code>follow_trajectory()</code></a> begins software tracking of the spline. Finally, setting soft motion limits for the head's pan/tilt range happens using:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1"># clip the head_pan&#39;s range</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_soft_motion_limit_min</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_pan&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_soft_motion_limit_max</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>

<span class="c1"># clip the head_tilt&#39;s range</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_soft_motion_limit_min</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">h</span><span class="o">.</span><span class="n">get_joint</span><span class="p">(</span><span class="s1">&#39;head_tilt&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">set_soft_motion_limit_max</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">h</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p>The <a href="#stretch_body.dynamixel_X_chain.DynamixelXChain.set_soft_motion_limit_min"><code>set_soft_motion_limit_min/max()</code></a> methods perform clipping of the joint's range at the software level (cannot persist across reboots). All of <a href="#stretch_body.head.Head">Head's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.head.Head" class="doc doc-heading">
        <code>
stretch_body.head.Head            (<span title="stretch_body.dynamixel_X_chain.DynamixelXChain">DynamixelXChain</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Head</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts machinery required to interface with this device</p>
<h6 id="stretch_body.head.Head.startup--parameters">Parameters</h6>
<p>threaded : bool
    whether a thread manages hardware polling/pushing in the background</p>
<h6 id="stretch_body.head.Head.startup--returns">Returns</h6>
<p>bool
    whether the startup procedure succeeded</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.get_joint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_joint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Retrieves joint by name.</p>
<h6 id="stretch_body.head.Head.get_joint--parameters">Parameters</h6>
<p>joint_name : str
    valid joints defined in <code>joints</code></p>
<h6 id="stretch_body.head.Head.get_joint--returns">Returns</h6>
<p>DynamixelHelloXL430 or None
    Motor object on valid joint name, else None</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.move_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">,</span> <span class="n">x_r</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>joint: Name of the joint to move ('head_pan' or 'head_tilt')
x_r: commanded absolute position (radians).
v_r: velocity for trapezoidal motion profile (rad/s).
a_r: acceleration for trapezoidal motion profile (rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.move_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">,</span> <span class="n">x_r</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>joint: Name of the joint to move ('head_pan' or 'head_tilt')
x_r: commanded incremental motion (radians).
v_r: velocity for trapezoidal motion profile (rad/s).
a_r: acceleration for trapezoidal motion profile (rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.head.Head.pose" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">],</span> <span class="n">a_r</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">])</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>p: Dictionary key to named pose (eg 'ahead')
v_r: list, velocities for trapezoidal motion profile (rad/s).
a_r: list, accelerations for trapezoidal motion profile (rad/s^2)</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="using-the-endofarm-class">Using the EndOfArm class</h3>
<p>The interface to Stretch's end of arm is the <a href="#stretch_body.end_of_arm.EndOfArm">EndOfArm</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.end_of_arm</span>

<span class="n">e</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">end_of_arm</span><span class="o">.</span><span class="n">EndOfArm</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">e</span><span class="o">.</span><span class="n">startup</span><span class="p">(</span><span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start end of arm!</span>

<span class="c1"># interact with the end of arm here</span>

<span class="n">e</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.end_of_arm.EndOfArm">EndOfArm's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.end_of_arm.EndOfArm" class="doc doc-heading">
        <code>
stretch_body.end_of_arm.EndOfArm            (<span title="stretch_body.dynamixel_X_chain.DynamixelXChain">DynamixelXChain</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>The EndOfArm class allows for an extensible serial chain of Dynamixel X series devices
It allows the specific type of device to be declared at runtime via the Yaml parameters
In this way, a user can add their own custom Dynamixel based tools to the robot end-of-arm by
simply deriving it from DynamixelHelloXL430 and declaring the class name / Python module name
in the User YAML file</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;end_of_arm&#39;</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Starts machinery required to interface with this device</p>
<h6 id="stretch_body.end_of_arm.EndOfArm.startup--parameters">Parameters</h6>
<p>threaded : bool
    whether a thread manages hardware polling/pushing in the background</p>
<h6 id="stretch_body.end_of_arm.EndOfArm.startup--returns">Returns</h6>
<p>bool
    whether the startup procedure succeeded</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.get_joint" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_joint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Retrieves joint by name.</p>
<h6 id="stretch_body.end_of_arm.EndOfArm.get_joint--parameters">Parameters</h6>
<p>joint_name : str
    valid joints defined as defined in params['devices']</p>
<h6 id="stretch_body.end_of_arm.EndOfArm.get_joint--returns">Returns</h6>
<p>DynamixelHelloXL430 or None
    Motor object on valid joint name, else None</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.move_to" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_to</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">,</span> <span class="n">x_r</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>joint: name of joint (string)
x_r: commanded absolute position (radians).
v_r: velocity for trapezoidal motion profile (rad/s).
a_r: acceleration for trapezoidal motion profile (rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.move_by" class="doc doc-heading">
<code class="highlight language-python"><span class="n">move_by</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">,</span> <span class="n">x_r</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>joint: name of joint (string)
x_r: commanded incremental motion (radians).
v_r: velocity for trapezoidal motion profile (rad/s).
a_r: acceleration for trapezoidal motion profile (rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.pose" class="doc doc-heading">
<code class="highlight language-python"><span class="n">pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">v_r</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">a_r</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>joint: name of joint (string)
p: named pose of joint
v_r: velocity for trapezoidal motion profile (rad/s).
a_r: acceleration for trapezoidal motion profile (rad/s^2)</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.stow" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stow</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.home" class="doc doc-heading">
<code class="highlight language-python"><span class="n">home</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">joint</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Home to hardstops</p>

    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.end_of_arm.EndOfArm.is_tool_present" class="doc doc-heading">
<code class="highlight language-python"><span class="n">is_tool_present</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">class_name</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>Return true if the given tool type is present (eg. StretchGripper)
Allows for conditional logic when switching end-of-arm tools</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="using-the-wacc-class">Using the Wacc class</h3>
<p>The interface to Stretch's wrist board is the <a href="#stretch_body.wacc.Wacc">Wacc</a> (wrist + accelerometer) class. This board provides an Arduino and accelerometer sensor that is accessible from the <a href="#stretch_body.wacc.Wacc">Wacc</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.wacc</span>

<span class="n">w</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">wacc</span><span class="o">.</span><span class="n">Wacc</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">w</span><span class="o">.</span><span class="n">startup</span><span class="p">(</span><span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start wacc!</span>

<span class="c1"># interact with the wacc here</span>

<span class="n">w</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.wacc.Wacc">Wacc's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.wacc.Wacc" class="doc doc-heading">
        <code>
stretch_body.wacc.Wacc            (<span title="stretch_body.wacc.WaccBase">WaccBase</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Power and IMU board (Pimu)</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.wacc.Wacc.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.wacc.Wacc.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>First determine which protocol version the uC firmware is running.
Based on that version, replaces PimuBase class inheritance with a inheritance to a child class of PimuBase that supports that protocol</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<h3 id="using-the-pimu-class">Using the Pimu class</h3>
<p>The interface to Stretch's power board is the <a href="#stretch_body.pimu.Pimu">Pimu</a> (power + IMU) class. This board provides an 9 DOF IMUthat is accessible from the <a href="#stretch_body.pimu.Pimu">Pimu</a> class. It is typically initialized as:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kn">import</span> <span class="nn">stretch_body.pimu</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">stretch_body</span><span class="o">.</span><span class="n">pimu</span><span class="o">.</span><span class="n">Pimu</span><span class="p">()</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">startup</span><span class="p">(</span><span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="n">exit</span><span class="p">()</span> <span class="c1"># failed to start pimu!</span>

<span class="c1"># interact with the pimu here</span>

<span class="n">p</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<p><a href="#stretch_body.pimu.Pimu">Pimu's</a> subroutines are documented below.</p>


  <div class="doc doc-object doc-class">



<h3 id="stretch_body.pimu.Pimu" class="doc doc-heading">
        <code>
stretch_body.pimu.Pimu            (<span title="stretch_body.pimu.PimuBase">PimuBase</span>)
        </code>



</h3>

    <div class="doc doc-contents first">

      <p>API to the Stretch RE1 Power and IMU board (Pimu)</p>




  <div class="doc doc-children">









  <div class="doc doc-object doc-method">



<h4 id="stretch_body.pimu.Pimu.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_reset</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

</h4>

    <div class="doc doc-contents ">


    </div>

  </div>



  <div class="doc doc-object doc-method">



<h4 id="stretch_body.pimu.Pimu.startup" class="doc doc-heading">
<code class="highlight language-python"><span class="n">startup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threaded</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


</h4>

    <div class="doc doc-contents ">

      <p>First determine which protocol version the uC firmware is running.
Based on that version, replaces PimuBase class inheritance with a inheritance to a child class of PimuBase that supports that protocol</p>

    </div>

  </div>





  </div>

    </div>

  </div>

<hr />
<div align="center"> All materials are Copyright 2020 by Hello Robot Inc. The Stretch RE1 robot has patents pending</div>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 Hello Robot Inc
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://hello-robot.com" target="_blank" rel="noopener" title="hello-robot.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://twitter.com/HelloRobotInc" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/hello-robot" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://linkedin.com/company/hello-robot-inc" target="_blank" rel="noopener" title="linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77Z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant"], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>